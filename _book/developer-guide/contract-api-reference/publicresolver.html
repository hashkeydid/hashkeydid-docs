
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>PublicResolver Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="kyc.html" />
    
    
    <link rel="prev" href="basicinfo.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../terminology.html">
            
                <a href="../../terminology.html">
            
                    
                    Terminology
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../faq.html">
            
                <a href="../../faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../deployments.html">
            
                <a href="../../deployments.html">
            
                    
                    Deployment
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Developer Guide</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="./">
            
                <a href="./">
            
                    
                    Contract API Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="registry.html">
            
                <a href="registry.html">
            
                    
                    Registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="basicinfo.html">
            
                <a href="basicinfo.html">
            
                    
                    BasicInfo
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.1.3" data-path="publicresolver.html">
            
                <a href="publicresolver.html">
            
                    
                    PublicResolver
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="kyc.html">
            
                <a href="kyc.html">
            
                    
                    KYC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="credential.html">
            
                <a href="credential.html">
            
                    
                    Credential
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../libraries.html">
            
                <a href="../libraries.html">
            
                    
                    Libraries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../resolver.html">
            
                <a href="../resolver.html">
            
                    
                    Resolver
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../kyc.html">
            
                <a href="../kyc.html">
            
                    
                    KYC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../credential.html">
            
                <a href="../credential.html">
            
                    
                    Credential
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../did-as-nft.html">
            
                <a href="../did-as-nft.html">
            
                    
                    DID as NFT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="../openapi.html">
            
                <a href="../openapi.html">
            
                    
                    OpenAPI
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >PublicResolver</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="publicresolver">PublicResolver</h1>
<h3 id="abstract">Abstract</h3>
<p>Resolver contract records the DID user personal information (eg: <code>name</code>, <code>avatar</code>,<code>blockchain address</code>). DID user can display the personal information by resolver contract. all of the information is optional.</p>
<h3 id="reverse-resolution">Reverse resolution</h3>
<p>We are familiar with DNS resolution which is to resolve the domain name to the IP address, and reverse resolution means website IP address be resolved to the domain name of the website. The reverse resolution of DID is similar to the reverse resolution of DNS in that it supports associating human-readable names with blockchain addresses and resolving machine-readable identifiers to human-readable identifiers.</p>
<h4 id="set-reverse-resolution">Set reverse resolution</h4>
<p>DID reverse resolution information are stored in the DID registry contract. When a user register DID, the mapping relationship between DID and user address will be recorded in the <code>tokenId2Did</code> mapping table. Although we retain the mapping relationship, it is up to the user to decide whether to use the reverse resolution. When the user needs to use reverse resolution, he can call the following function in the Resolver contract to turn on, which is unavailable by default.</p>
<pre><code class="lang-solidity">function setReverse(bool isReverse) public;
</code></pre>
<ul>
<li>isReverse: true/false</li>
</ul>
<h4 id="get-reverse-resolution">Get reverse resolution</h4>
<p>To use the reverse resolution function, you only need to call the following function in the Resolver contract.</p>
<pre><code class="lang-solidity">function name(address _addr) public view returns (string memory);
</code></pre>
<ul>
<li>addr: get addr&apos;s DID name</li>
</ul>
<h3 id="blockchain-addresses">Blockchain addresses</h3>
<p>Wallet developers are beginning to require the ability to resolve multiple blockchain addresses in the DID, and this specification standardizes the means of entering and retrieving these addresses. Users can set multiple blockchain addresses for DID.</p>
<h4 id="add-address">Add address</h4>
<p>Call the following function to add the address for DID. <code>coinType</code> is the cryptocurrency type indexed by <a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md" target="_blank">SLIP44</a>.</p>
<pre><code class="lang-solidity">function setAddr(uint256 tokenId, uint256 coinType, bytes memory _addr) public authorized(tokenId);
</code></pre>
<ul>
<li>tokenId: DID tokenId</li>
<li>coinType: the cryptocurrency type indexed by <a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md" target="_blank">SLIP44</a></li>
<li>_addr: blockchain address</li>
</ul>
<h4 id="get-address">Get address</h4>
<p>Access the DID-bound blockchain addresses and call the following function.</p>
<pre><code class="lang-solidity">function addr(uint256 tokenId, uint256 coinType) public view returns(bytes memory);
</code></pre>
<ul>
<li>tokenId: DID tokenId</li>
<li>coinType: the cryptocurrency type indexed by <a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md" target="_blank">SLIP44</a></li>
</ul>
<h3 id="ecdsa-secp256k1-public-key">Ecdsa secp256k1 public key</h3>
<p>DID users can set the Ecdsa secp256K1 public key. When the user uses the private key to sign information, the receiver can use the public key to verify the signature. When the receiver wants to encrypt the communication with the DID User, the receiver can use the public key to encrypt the communication information, and the DID User uses the private key to decrypt the information.</p>
<h4 id="set-public-key">Set public key</h4>
<p>In the resolver contract, the following function is called to set the public key.</p>
<pre><code class="lang-solidity">function setPubkey(uint256 tokenId, bytes32 x, bytes32 y) external authorized(tokenId);
</code></pre>
<ul>
<li>tokenId: DID tokenId</li>
<li>x: the x coordinate of the curve point for the public key</li>
<li>y: the y coordinate of the curve point for the public key</li>
</ul>
<h4 id="get-public-key">Get public key</h4>
<p>Call the following function to query the public key.</p>
<pre><code class="lang-solidity">function pubkey(uint256 tokenId) external view returns (bytes32 x, bytes32 y);
</code></pre>
<ul>
<li>tokenId: DID tokenId</li>
</ul>
<h3 id="text">Text</h3>
<p>The user can set some attributes for DID eg: <code>name</code>, <code>age</code> to store.</p>
<h4 id="set-text">Set text</h4>
<p>The following function is used to set text.</p>
<pre><code class="lang-solidity">function setText(uint256 tokenId, string calldata key, string calldata value) external authorized(tokenId);
</code></pre>
<ul>
<li>tokenId: DID tokenId</li>
<li>key: eg: <code>name</code></li>
<li>value: eg: <code>allen</code></li>
</ul>
<p>Note: The <code>avatar</code> field is used when the user wants to set an avatar for himself. The field value URI should follow the following rules:</p>
<ul>
<li>HTTP: If you provide an HTTP URI, it should be able to parse directly into an avatar image, rather than a traditional HTML page, metadata, or other content.</li>
<li>IPFS: If an IPFS URI is provided, it should be able to parse directly into an avatar image. Clients without built-in IPFS support can rewrite the URI as an HTTPS URL referencing the IPFS gateway before parsing. As described in <a href="https://docs.ipfs.io/how-to/address-ipfs-on-web/" target="_blank">this document</a>.</li>
<li><p>NFT: NFT can also be used as the profile picture of DID. When setting the profile picture URI, you need to follow the following standards:</p>
<pre><code class="lang-shell">nft:chainId:tokenType:contractAddress:tokenId
</code></pre>
<ul>
<li>nft: protocol name</li>
<li>chainId: chain ID</li>
<li>tokenType: token type, eg: <code>721/1155</code></li>
<li>contractAddress: contract address</li>
<li>tokenId: NFT&apos;s tokenId</li>
</ul>
</li>
</ul>
<h4 id="get-text">Get text</h4>
<p>The following function is used to query the text.</p>
<pre><code class="lang-solidity">function text(uint256 tokenId, string calldata key) external view returns (string memory);
</code></pre>
<ul>
<li>tokenId: DID tokenId</li>
<li>key: eg: <code>name</code></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="basicinfo.html" class="navigation navigation-prev " aria-label="Previous page: BasicInfo">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="kyc.html" class="navigation navigation-next " aria-label="Next page: KYC">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"PublicResolver","level":"2.1.3","depth":2,"next":{"title":"KYC","level":"2.1.4","depth":2,"path":"developer-guide/contract-api-reference/kyc.md","ref":"developer-guide/contract-api-reference/kyc.md","articles":[]},"previous":{"title":"BasicInfo","level":"2.1.2","depth":2,"path":"developer-guide/contract-api-reference/basicinfo.md","ref":"developer-guide/contract-api-reference/basicinfo.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"developer-guide/contract-api-reference/publicresolver.md","mtime":"2022-10-11T05:51:08.423Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-10-11T06:23:16.523Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

